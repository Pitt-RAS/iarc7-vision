# Settings for the optical flow estimator
optical_flow_estimator:
    # Pixels per meter to scale image to
    pixels_per_meter: 250

    # fov of the camera
    fov: 1.64

    # Minimum altitude to run the detector
    min_estimation_altitude: 0.15

    # Window size for optical flow
    win_size: 20

    # Levels of the pyramid to run the optical flow at
    max_level: 3

    # Number of iterations to run the optical flow
    iters: 20

    # Number of points to track
    points: 100

    # Quality level for the corner detector
    quality_level: 0.01

    # Min distance between points for the corner detector
    min_dist: 20

    # Image scale factor
    scale_factor: 0.5

    # Debug settings for the optical flow estimator
    # Publish image with the velocity vectors drawn on it
    debug_vectors_image: true

    # Publish image with average velocity vector drawn on it
    debug_average_vector_image: true

    # Frames to skip before publishing debug images
    debug_frameskip: 6

    # Timeout for imu updates
    imu_update_timeout: 0.3

    # Min variance to send with velocity measurements
    variance: 4

    # What to scale the variance on according to the rotation rate
    variance_scale: 1.0

    # Cutoff area where velocity vectors aren't included in the average
    x_cutoff_region_velocity_measurement: 0.2
    y_cutoff_region_velocity_measurement: 0.2

    orientation_image_time_offset: 0.02

    published_velocity_time_offset: -0.3
